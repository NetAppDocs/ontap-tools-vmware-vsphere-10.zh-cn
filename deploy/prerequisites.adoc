---
permalink: deploy/prerequisites.html 
sidebar: sidebar 
keywords: ONTAP tools,Storage Replication Adapter 
summary: 在为 VMware vSphere 部署 ONTAP 工具之前，您应熟悉部署软件包的空间要求以及一些基本主机系统要求。 
---
= 适用于 VMware vSphere 的 ONTAP 工具的要求和配置限制
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
在为 VMware vSphere 部署 ONTAP 工具之前，您应熟悉部署软件包的空间要求以及一些基本主机系统要求。

您可以将适用于VMware vSphere的ONTAP工具与VMware vCenter Server虚拟设备(vCSA)结合使用。您应在包含ESXi系统的受支持vSphere客户端上部署适用于VMware vSphere的ONTAP工具。



== 系统要求

* *每个节点的安装包空间要求*
+
** 15 GB用于精简配置安装
** 348 GB用于厚配置安装


* *主机系统规模要求* 下表显示了每种部署规模的推荐内存。对于高可用性 (HA) 部署，您需要列出的设备大小的三倍。


|===


| *部署类型* | *每个节点的CPU数* | *每个节点的内存(GB)* | *每个节点厚配置的磁盘空间(GB)* 


| 小型 | 9 | 18 | 350 


| 中 | 13 | 26 | 350 


| 大注：大型部署仅适用于HA配置。 | 17 | 34 | 350 
|===

NOTE: 启用备份后、每个ONTAP工具集群在部署VM的数据存储库上还需要50 GB的空间。因此、非HA需要400 GB的空间、而HA总共需要1100 GB的空间。



== 最低存储和应用程序要求

|===
| 存储、主机和应用程序 | 版本要求 


| ONTAP | 9.15.1、9.16.0、9.16.1、9.17.0 和 9.17.1 


| ONTAP工具支持的ESXi主机 | 7.0.3及更高版本 


| ONTAP工具支持的vCenter Server | 7.0U3及更高版本 


| VASA Provider | 3.0 


| OVA应用程序 | 10.5 


| ESXi主机以部署ONTAP Tools虚拟机 | 7.0U3和8.0U3 


| vCenter Server以部署ONTAP Tools虚拟机 | 7.0和8.0 
|===

NOTE: 从适用于VMware vSphere 10.4的ONTAP工具开始、虚拟机硬件已从版本10更改为17。

互操作性表工具(IMT)提供了有关受支持的ONTAP、vCenter Server、ESXi主机和插件应用程序版本的最新信息。

https://imt.netapp.com/matrix/imt.jsp?components=105475;&solution=1777&isHWU&src=IMT["互操作性表工具"^]



== 端口要求

下表概述了NetApp使用的网络端口及其用途。端口分为三种类型：

* 外部端口：这些端口可以从 Kubernetes 集群或节点外部访问。它们允许服务与外部网络或用户通信，从而实现与集群环境之外的系统集成。
* 节点间端口：这些端口允许 Kubernetes 集群内的节点之间进行通信。它们是集群任务（例如数据共享和协同工作）所必需的。对于单节点部署，节点间端口仅在节点内部使用，不需要外部访问。节点间端口可以接受来自集群外部的流量。使用防火墙规则阻止节点间端口访问互联网。
* 内部端口：这些端口使用 ClusterIP 地址在 Kubernetes 集群内部进行通信。它们不会对外暴露，因此无需添加到防火墙规则中。



NOTE: 确保所有ONTAP工具节点位于同一子网，以保持彼此之间不间断的通信。

点击展开或折叠端口要求表。

[%collapsible]
====
|===
| *服务/组件名称* | * 端口 * | *协议* | *端口类型* | * 问题描述 * 


| ntv-gateway-svc (LB) | 443、8443 | TCP | 外部 | 用于 VASA 提供商服务的传入通信的直通端口。VASA 提供程序自签名证书和自定义 CA 证书托管在此端口上。 


| SSH | 22 | TCP | 外部 | 用于远程服务器登录和命令执行的安全外壳协议 (Secure Shell)。 


| rke2 服务器 | 9345 | TCP | 节点间 | RKE2 监管 API（仅限受信任网络）。 


| kube-apiserver | 6443 | TCP | 节点间 | Kubernetes API 服务器端口（仅限受信任的网络）。 


| rpcbind/端口映射器 | 111 | TCP/UDP | 节点间 | 用于服务间的 RPC 通信。 


| coredns（DNS） | 53 | TCP/UDP | 节点间 | 集群内用于名称解析的域名系统 (DNS) 服务。 


| NTP | 123 | UDP | 节点间 | 网络时间协议（NTP）用于时间同步。 


| etcd | 2379、2380、2381 | TCP | 节点间 | 用于存储集群数据的键值存储。 


| kube-vip | 2112 | TCP | 节点间 | Kubernetes API 服务器端口。 


| kubelet | 10248、10250 | TCP | 节点间 | Kubernetes 组件 


| kube-controller | 10257 | TCP | 节点间 | Kubernetes 组件 


| 云控制器 | 10258 | TCP | 节点间 | Kubernetes 组件 


| kube-scheduler | 10259 | TCP | 节点间 | Kubernetes 组件 


| kube-proxy | 10249、10256 | TCP | 节点间 | Kubernetes 组件 


| 加州节点 | 9091、9099 | TCP | 节点间 | Calico 网络组件。 


| containerd | 10010 | TCP | 节点间 | 容器守护进程服务。 


| VXLAN（法兰绒） | 8472 | UDP | 节点间 | 用于 pod 通信的覆盖网络。 
|===

NOTE: 对于高可用性部署，请确保所有节点之间都已打开 UDP 端口 8472。该端口支持跨节点的 pod 间通信；阻塞该端口将中断节点间网络连接。

====


== 部署适用于VMware vSphere的ONTAP工具的配置限制

您可以使用下表作为指南来配置适用于VMware vSphere的ONTAP工具。

|===


| * 部署 * | * 类型 * | *数量* | *主机数* 


| 非HA | 小型(S) | ~1、K | 32. 


| 非HA | 中(M) | ~24K | 64 


| 高可用性 | 小型(S) | ~24K | 64 


| 高可用性 | 中(M) | ~50 k | 128 


| 高可用性 | 大(L) | ~100k | 256 [注意] 表中的主机数量代表所有连接的 vCenter 的总数。 
|===


== 适用于VMware vSphere的ONTAP工具—Storage Replication Adapter (SRA)

下表显示了使用适用于VMware vSphere的ONTAP工具时每个VMware Live Site Recovery实例支持的数量。

|===
| *vCenter部署大小* | *小* | *中* 


| 配置为使用基于阵列的复制进行保护的虚拟机总数 | 2000 | 5000 


| 基于阵列的复制保护组总数 | 250 | 250 


| 每个恢复计划的保护组总数 | 50 | 50 


| 复制的数据存储库数量 | 255 | 255 


| VM数量 | 4000 | 7000 
|===
下表显示了VMware Live Site Recovery的数量以及适用于VMware vSphere部署规模的相应ONTAP工具。

|===


| *VMware Live Site Recovery实例数* | * ONTAP工具部署规模* 


| 最多4个 | 小型 


| 4 到 8 | 中 


| 8个以上 | 大型 
|===
有关详细信息，请参阅 https://techdocs.broadcom.com/us/en/vmware-cis/live-recovery/live-site-recovery/9-0/overview/site-recovery-manager-system-requirements/operational-limits-of-site-recovery-manager.html["VMware Live Site Recovery的操作限制"]。
